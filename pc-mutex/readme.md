# 生产者和消费者

注意到我们为生产者和消费者分别设置了 CAN_PRODUCE 和 CAN_CONSUME 两个条件。
我们在持有互斥锁的前提下检查条件是否满足，且只有条件满足时才能生产/消费。

条件不满足时，我们必须释放锁，并再次等待——如果不释放锁，其他生产者/消费者就无法生产/消费，从而造成死锁。

使用goto语句和retry标签来实现条件检查和重试。

在Tproduce函数中，如果条件CAN_PRODUCE不满足，线程会释放互斥锁，并通过goto retry语句回到retry标签处重新尝试获取锁和检查条件。
在Tconsume函数中，也采用了类似的逻辑，当条件CAN_CONSUME不满足时，线程会释放互斥锁，并通过goto retry语句回到retry标签处重新尝试获取锁和检查条件。
